import{g as t,r as i,c as e,h as s,H as r}from"./p-ec5b8142.js";class n{static instance(t){return t.bardFileFormController||=new n(t)}progressContainerTarget;dialog;element;progressTargetMap;controllers;submitted;processing;errors;constructor(t){this.element=t;this.progressTargetMap={};this.controllers=[];this.submitted=false;this.processing=false;this.errors=false;this.element.insertAdjacentHTML("beforeend",`<dialog id="form-controller-dialog">\n        <div class="direct-upload-wrapper">\n          <div class="direct-upload-content">\n            <h3>Uploading your media</h3>\n            <div id="progress-container"></div>\n          </div>\n        </div>\n      </dialog>`);this.dialog=this.element.querySelector("#form-controller-dialog");this.progressContainerTarget=this.dialog.querySelector("#progress-container");if(this.element.dataset.remote!=="true"&&(this.element.dataset.turbo=="false"||!window.Turbo?.session?.enabled)){this.element.addEventListener("submit",(t=>this.submit(t)))}window.addEventListener("beforeunload",(t=>this.beforeUnload(t)));this.element.addEventListener("direct-upload:initialize",(t=>this.init(t)));this.element.addEventListener("direct-upload:start",(t=>this.start(t)));this.element.addEventListener("direct-upload:progress",(t=>this.progress(t)));this.element.addEventListener("direct-upload:error",(t=>this.error(t)));this.element.addEventListener("direct-upload:end",(t=>this.end(t)));this.element.addEventListener("uploaded-file:remove",(t=>this.removeUploadedFile(t)))}beforeUnload(t){if(this.processing){t.preventDefault();return t.returnValue=""}}submit(t){t.preventDefault();this.submitted=true;this.startNextController();if(this.processing){this.dialog.showModal()}}startNextController(){if(this.processing)return;const t=this.controllers.shift();if(t){this.processing=true;t.start((t=>{if(t){Array.from(this.element.querySelectorAll("input[type=file]")).forEach((t=>t.disabled=false))}this.processing=false;this.startNextController()}))}else{this.submitForm()}}submitForm(){if(this.submitted){Array.from(this.element.querySelectorAll("input[type=file]")).forEach((t=>t.disabled=true));window.setTimeout((()=>{this.element.submit()}),10)}}init(t){const{id:i,file:e,controller:s}=t.detail;this.progressContainerTarget.insertAdjacentHTML("beforebegin",`\n      <progress-bar id="direct-upload-${i}" class="direct-upload--pending">${e.name}</progress-bar>\n    `);const r=document.getElementById(`direct-upload-${i}`);this.progressTargetMap[i]=r;this.controllers.push(s);this.startNextController()}start(t){this.progressTargetMap[t.detail.id].classList.remove("direct-upload--pending")}progress(t){const{id:i,progress:e}=t.detail;this.progressTargetMap[i].percent=e}error(t){t.preventDefault();const{id:i,error:e}=t.detail;const s=this.progressTargetMap[i];s.classList.add("direct-upload--error");s.title=e}end(t){this.progressTargetMap[t.detail.id].classList.add("direct-upload--complete")}removeUploadedFile(t){const i=t.detail;const e=i.controller?.directUpload?.id;if(e){document.getElementById(`direct-upload-${e}`).remove();delete this.progressTargetMap[e]}}}var o={exports:{}};(function(t,i){(function(i){{t.exports=i()}})((function(t){var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function e(t,i){var e=t[0],s=t[1],r=t[2],n=t[3];e+=(s&r|~s&n)+i[0]-680876936|0;e=(e<<7|e>>>25)+s|0;n+=(e&s|~e&r)+i[1]-389564586|0;n=(n<<12|n>>>20)+e|0;r+=(n&e|~n&s)+i[2]+606105819|0;r=(r<<17|r>>>15)+n|0;s+=(r&n|~r&e)+i[3]-1044525330|0;s=(s<<22|s>>>10)+r|0;e+=(s&r|~s&n)+i[4]-176418897|0;e=(e<<7|e>>>25)+s|0;n+=(e&s|~e&r)+i[5]+1200080426|0;n=(n<<12|n>>>20)+e|0;r+=(n&e|~n&s)+i[6]-1473231341|0;r=(r<<17|r>>>15)+n|0;s+=(r&n|~r&e)+i[7]-45705983|0;s=(s<<22|s>>>10)+r|0;e+=(s&r|~s&n)+i[8]+1770035416|0;e=(e<<7|e>>>25)+s|0;n+=(e&s|~e&r)+i[9]-1958414417|0;n=(n<<12|n>>>20)+e|0;r+=(n&e|~n&s)+i[10]-42063|0;r=(r<<17|r>>>15)+n|0;s+=(r&n|~r&e)+i[11]-1990404162|0;s=(s<<22|s>>>10)+r|0;e+=(s&r|~s&n)+i[12]+1804603682|0;e=(e<<7|e>>>25)+s|0;n+=(e&s|~e&r)+i[13]-40341101|0;n=(n<<12|n>>>20)+e|0;r+=(n&e|~n&s)+i[14]-1502002290|0;r=(r<<17|r>>>15)+n|0;s+=(r&n|~r&e)+i[15]+1236535329|0;s=(s<<22|s>>>10)+r|0;e+=(s&n|r&~n)+i[1]-165796510|0;e=(e<<5|e>>>27)+s|0;n+=(e&r|s&~r)+i[6]-1069501632|0;n=(n<<9|n>>>23)+e|0;r+=(n&s|e&~s)+i[11]+643717713|0;r=(r<<14|r>>>18)+n|0;s+=(r&e|n&~e)+i[0]-373897302|0;s=(s<<20|s>>>12)+r|0;e+=(s&n|r&~n)+i[5]-701558691|0;e=(e<<5|e>>>27)+s|0;n+=(e&r|s&~r)+i[10]+38016083|0;n=(n<<9|n>>>23)+e|0;r+=(n&s|e&~s)+i[15]-660478335|0;r=(r<<14|r>>>18)+n|0;s+=(r&e|n&~e)+i[4]-405537848|0;s=(s<<20|s>>>12)+r|0;e+=(s&n|r&~n)+i[9]+568446438|0;e=(e<<5|e>>>27)+s|0;n+=(e&r|s&~r)+i[14]-1019803690|0;n=(n<<9|n>>>23)+e|0;r+=(n&s|e&~s)+i[3]-187363961|0;r=(r<<14|r>>>18)+n|0;s+=(r&e|n&~e)+i[8]+1163531501|0;s=(s<<20|s>>>12)+r|0;e+=(s&n|r&~n)+i[13]-1444681467|0;e=(e<<5|e>>>27)+s|0;n+=(e&r|s&~r)+i[2]-51403784|0;n=(n<<9|n>>>23)+e|0;r+=(n&s|e&~s)+i[7]+1735328473|0;r=(r<<14|r>>>18)+n|0;s+=(r&e|n&~e)+i[12]-1926607734|0;s=(s<<20|s>>>12)+r|0;e+=(s^r^n)+i[5]-378558|0;e=(e<<4|e>>>28)+s|0;n+=(e^s^r)+i[8]-2022574463|0;n=(n<<11|n>>>21)+e|0;r+=(n^e^s)+i[11]+1839030562|0;r=(r<<16|r>>>16)+n|0;s+=(r^n^e)+i[14]-35309556|0;s=(s<<23|s>>>9)+r|0;e+=(s^r^n)+i[1]-1530992060|0;e=(e<<4|e>>>28)+s|0;n+=(e^s^r)+i[4]+1272893353|0;n=(n<<11|n>>>21)+e|0;r+=(n^e^s)+i[7]-155497632|0;r=(r<<16|r>>>16)+n|0;s+=(r^n^e)+i[10]-1094730640|0;s=(s<<23|s>>>9)+r|0;e+=(s^r^n)+i[13]+681279174|0;e=(e<<4|e>>>28)+s|0;n+=(e^s^r)+i[0]-358537222|0;n=(n<<11|n>>>21)+e|0;r+=(n^e^s)+i[3]-722521979|0;r=(r<<16|r>>>16)+n|0;s+=(r^n^e)+i[6]+76029189|0;s=(s<<23|s>>>9)+r|0;e+=(s^r^n)+i[9]-640364487|0;e=(e<<4|e>>>28)+s|0;n+=(e^s^r)+i[12]-421815835|0;n=(n<<11|n>>>21)+e|0;r+=(n^e^s)+i[15]+530742520|0;r=(r<<16|r>>>16)+n|0;s+=(r^n^e)+i[2]-995338651|0;s=(s<<23|s>>>9)+r|0;e+=(r^(s|~n))+i[0]-198630844|0;e=(e<<6|e>>>26)+s|0;n+=(s^(e|~r))+i[7]+1126891415|0;n=(n<<10|n>>>22)+e|0;r+=(e^(n|~s))+i[14]-1416354905|0;r=(r<<15|r>>>17)+n|0;s+=(n^(r|~e))+i[5]-57434055|0;s=(s<<21|s>>>11)+r|0;e+=(r^(s|~n))+i[12]+1700485571|0;e=(e<<6|e>>>26)+s|0;n+=(s^(e|~r))+i[3]-1894986606|0;n=(n<<10|n>>>22)+e|0;r+=(e^(n|~s))+i[10]-1051523|0;r=(r<<15|r>>>17)+n|0;s+=(n^(r|~e))+i[1]-2054922799|0;s=(s<<21|s>>>11)+r|0;e+=(r^(s|~n))+i[8]+1873313359|0;e=(e<<6|e>>>26)+s|0;n+=(s^(e|~r))+i[15]-30611744|0;n=(n<<10|n>>>22)+e|0;r+=(e^(n|~s))+i[6]-1560198380|0;r=(r<<15|r>>>17)+n|0;s+=(n^(r|~e))+i[13]+1309151649|0;s=(s<<21|s>>>11)+r|0;e+=(r^(s|~n))+i[4]-145523070|0;e=(e<<6|e>>>26)+s|0;n+=(s^(e|~r))+i[11]-1120210379|0;n=(n<<10|n>>>22)+e|0;r+=(e^(n|~s))+i[2]+718787259|0;r=(r<<15|r>>>17)+n|0;s+=(n^(r|~e))+i[9]-343485551|0;s=(s<<21|s>>>11)+r|0;t[0]=e+t[0]|0;t[1]=s+t[1]|0;t[2]=r+t[2]|0;t[3]=n+t[3]|0}function s(t){var i=[],e;for(e=0;e<64;e+=4){i[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24)}return i}function r(t){var i=[],e;for(e=0;e<64;e+=4){i[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)}return i}function n(t){var i=t.length,r=[1732584193,-271733879,-1732584194,271733878],n,o,a,h,c,l;for(n=64;n<=i;n+=64){e(r,s(t.substring(n-64,n)))}t=t.substring(n-64);o=t.length;a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<o;n+=1){a[n>>2]|=t.charCodeAt(n)<<(n%4<<3)}a[n>>2]|=128<<(n%4<<3);if(n>55){e(r,a);for(n=0;n<16;n+=1){a[n]=0}}h=i*8;h=h.toString(16).match(/(.*?)(.{0,8})$/);c=parseInt(h[2],16);l=parseInt(h[1],16)||0;a[14]=c;a[15]=l;e(r,a);return r}function o(t){var i=t.length,s=[1732584193,-271733879,-1732584194,271733878],n,o,a,h,c,l;for(n=64;n<=i;n+=64){e(s,r(t.subarray(n-64,n)))}t=n-64<i?t.subarray(n-64):new Uint8Array(0);o=t.length;a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<o;n+=1){a[n>>2]|=t[n]<<(n%4<<3)}a[n>>2]|=128<<(n%4<<3);if(n>55){e(s,a);for(n=0;n<16;n+=1){a[n]=0}}h=i*8;h=h.toString(16).match(/(.*?)(.{0,8})$/);c=parseInt(h[2],16);l=parseInt(h[1],16)||0;a[14]=c;a[15]=l;e(s,a);return s}function a(t){var e="",s;for(s=0;s<4;s+=1){e+=i[t>>s*8+4&15]+i[t>>s*8&15]}return e}function h(t){var i;for(i=0;i<t.length;i+=1){t[i]=a(t[i])}return t.join("")}if(h(n("hello"))!=="5d41402abc4b2a76b9719d911017c592");if(typeof ArrayBuffer!=="undefined"&&!ArrayBuffer.prototype.slice){(function(){function i(t,i){t=t|0||0;if(t<0){return Math.max(t+i,0)}return Math.min(t,i)}ArrayBuffer.prototype.slice=function(e,s){var r=this.byteLength,n=i(e,r),o=r,a,h,c,l;if(s!==t){o=i(s,r)}if(n>o){return new ArrayBuffer(0)}a=o-n;h=new ArrayBuffer(a);c=new Uint8Array(h);l=new Uint8Array(this,n,a);c.set(l);return h}})()}function c(t){if(/[\u0080-\uFFFF]/.test(t)){t=unescape(encodeURIComponent(t))}return t}function l(t,i){var e=t.length,s=new ArrayBuffer(e),r=new Uint8Array(s),n;for(n=0;n<e;n+=1){r[n]=t.charCodeAt(n)}return i?r:s}function u(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function d(t,i,e){var s=new Uint8Array(t.byteLength+i.byteLength);s.set(new Uint8Array(t));s.set(new Uint8Array(i),t.byteLength);return e?s:s.buffer}function f(t){var i=[],e=t.length,s;for(s=0;s<e-1;s+=2){i.push(parseInt(t.substr(s,2),16))}return String.fromCharCode.apply(String,i)}function p(){this.reset()}p.prototype.append=function(t){this.appendBinary(c(t));return this};p.prototype.appendBinary=function(t){this._buff+=t;this._length+=t.length;var i=this._buff.length,r;for(r=64;r<=i;r+=64){e(this._hash,s(this._buff.substring(r-64,r)))}this._buff=this._buff.substring(r-64);return this};p.prototype.end=function(t){var i=this._buff,e=i.length,s,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n;for(s=0;s<e;s+=1){r[s>>2]|=i.charCodeAt(s)<<(s%4<<3)}this._finish(r,e);n=h(this._hash);if(t){n=f(n)}this.reset();return n};p.prototype.reset=function(){this._buff="";this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}};p.prototype.setState=function(t){this._buff=t.buff;this._length=t.length;this._hash=t.hash;return this};p.prototype.destroy=function(){delete this._hash;delete this._buff;delete this._length};p.prototype._finish=function(t,i){var s=i,r,n,o;t[s>>2]|=128<<(s%4<<3);if(s>55){e(this._hash,t);for(s=0;s<16;s+=1){t[s]=0}}r=this._length*8;r=r.toString(16).match(/(.*?)(.{0,8})$/);n=parseInt(r[2],16);o=parseInt(r[1],16)||0;t[14]=n;t[15]=o;e(this._hash,t)};p.hash=function(t,i){return p.hashBinary(c(t),i)};p.hashBinary=function(t,i){var e=n(t),s=h(e);return i?f(s):s};p.ArrayBuffer=function(){this.reset()};p.ArrayBuffer.prototype.append=function(t){var i=d(this._buff.buffer,t,true),s=i.length,n;this._length+=t.byteLength;for(n=64;n<=s;n+=64){e(this._hash,r(i.subarray(n-64,n)))}this._buff=n-64<s?new Uint8Array(i.buffer.slice(n-64)):new Uint8Array(0);return this};p.ArrayBuffer.prototype.end=function(t){var i=this._buff,e=i.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r,n;for(r=0;r<e;r+=1){s[r>>2]|=i[r]<<(r%4<<3)}this._finish(s,e);n=h(this._hash);if(t){n=f(n)}this.reset();return n};p.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};p.ArrayBuffer.prototype.getState=function(){var t=p.prototype.getState.call(this);t.buff=u(t.buff);return t};p.ArrayBuffer.prototype.setState=function(t){t.buff=l(t.buff,true);return p.prototype.setState.call(this,t)};p.ArrayBuffer.prototype.destroy=p.prototype.destroy;p.ArrayBuffer.prototype._finish=p.prototype._finish;p.ArrayBuffer.hash=function(t,i){var e=o(new Uint8Array(t)),s=h(e);return i?f(s):s};return p}))})(o);var a=o.exports;const h=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice;class c{static create(t,i){const e=new c(t);e.create(i)}constructor(t){this.file=t;this.chunkSize=2097152;this.chunkCount=Math.ceil(this.file.size/this.chunkSize);this.chunkIndex=0}create(t){this.callback=t;this.md5Buffer=new a.ArrayBuffer;this.fileReader=new FileReader;this.fileReader.addEventListener("load",(t=>this.fileReaderDidLoad(t)));this.fileReader.addEventListener("error",(t=>this.fileReaderDidError(t)));this.readNextChunk()}fileReaderDidLoad(t){this.md5Buffer.append(t.target.result);if(!this.readNextChunk()){const t=this.md5Buffer.end(true);const i=btoa(t);this.callback(null,i)}}fileReaderDidError(t){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){const t=this.chunkIndex*this.chunkSize;const i=Math.min(t+this.chunkSize,this.file.size);const e=h.call(this.file,t,i);this.fileReader.readAsArrayBuffer(e);this.chunkIndex++;return true}else{return false}}}function l(t){const i=d(document.head,`meta[name="${t}"]`);if(i){return i.getAttribute("content")}}function u(t,i){if(typeof t=="string"){i=t;t=document}const e=t.querySelectorAll(i);return p(e)}function d(t,i){if(typeof t=="string"){i=t;t=document}return t.querySelector(i)}function f(t,i,e={}){const{disabled:s}=t;const{bubbles:r,cancelable:n,detail:o}=e;const a=document.createEvent("Event");a.initEvent(i,r||true,n||true);a.detail=o||{};try{t.disabled=false;t.dispatchEvent(a)}finally{t.disabled=s}return a}function p(t){if(Array.isArray(t)){return t}else if(Array.from){return Array.from(t)}else{return[].slice.call(t)}}class g{constructor(t,i,e,s={}){this.file=t;this.attributes={filename:t.name,content_type:t.type||"application/octet-stream",byte_size:t.size,checksum:i};this.xhr=new XMLHttpRequest;this.xhr.open("POST",e,true);this.xhr.responseType="json";this.xhr.setRequestHeader("Content-Type","application/json");this.xhr.setRequestHeader("Accept","application/json");this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");Object.keys(s).forEach((t=>{this.xhr.setRequestHeader(t,s[t])}));const r=l("csrf-token");if(r!=undefined){this.xhr.setRequestHeader("X-CSRF-Token",r)}this.xhr.addEventListener("load",(t=>this.requestDidLoad(t)));this.xhr.addEventListener("error",(t=>this.requestDidError(t)))}get status(){return this.xhr.status}get response(){const{responseType:t,response:i}=this.xhr;if(t=="json"){return i}else{return JSON.parse(i)}}create(t){this.callback=t;this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(t){if(this.status>=200&&this.status<300){const{response:t}=this;const{direct_upload:i}=t;delete t.direct_upload;this.attributes=t;this.directUploadData=i;this.callback(null,this.toJSON())}else{this.requestDidError(t)}}requestDidError(t){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){const t={};for(const i in this.attributes){t[i]=this.attributes[i]}return t}}class m{constructor(t){this.blob=t;this.file=t.file;const{url:i,headers:e}=t.directUploadData;this.xhr=new XMLHttpRequest;this.xhr.open("PUT",i,true);this.xhr.responseType="text";for(const t in e){this.xhr.setRequestHeader(t,e[t])}this.xhr.addEventListener("load",(t=>this.requestDidLoad(t)));this.xhr.addEventListener("error",(t=>this.requestDidError(t)))}create(t){this.callback=t;this.xhr.send(this.file.slice())}requestDidLoad(t){const{status:i,response:e}=this.xhr;if(i>=200&&i<300){this.callback(null,e)}else{this.requestDidError(t)}}requestDidError(t){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}}let v=0;class b{constructor(t,i,e,s={}){this.id=++v;this.file=t;this.url=i;this.delegate=e;this.customHeaders=s}create(t){c.create(this.file,((i,e)=>{if(i){t(i);return}const s=new g(this.file,e,this.url,this.customHeaders);w(this.delegate,"directUploadWillCreateBlobWithXHR",s.xhr);s.create((i=>{if(i){t(i)}else{const i=new m(s);w(this.delegate,"directUploadWillStoreFileWithXHR",i.xhr);i.create((i=>{if(i){t(i)}else{t(null,s.toJSON())}}))}}))}))}}function w(t,i,...e){if(t&&typeof t[i]=="function"){return t[i](...e)}}class x{constructor(t,i){this.input=t;this.file=i;this.directUpload=new b(this.file,this.url,this);this.dispatch("initialize")}start(t){const i=document.createElement("input");i.type="hidden";i.name=this.input.name;this.input.insertAdjacentElement("beforebegin",i);this.dispatch("start");this.directUpload.create(((e,s)=>{if(e){i.parentNode.removeChild(i);this.dispatchError(e)}else{i.value=s.signed_id}this.dispatch("end");t(e)}))}uploadRequestDidProgress(t){const i=t.loaded/t.total*100;if(i){this.dispatch("progress",{progress:i})}}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(t,i={}){i.file=this.file;i.id=this.directUpload.id;return f(this.input,`direct-upload:${t}`,{detail:i})}dispatchError(t){const i=this.dispatch("error",{error:t});if(!i.defaultPrevented){alert(t)}}directUploadWillCreateBlobWithXHR(t){this.dispatch("before-blob-request",{xhr:t})}directUploadWillStoreFileWithXHR(t){this.dispatch("before-storage-request",{xhr:t});t.upload.addEventListener("progress",(t=>this.uploadRequestDidProgress(t)))}}const y="input[type=file][data-direct-upload-url]:not([disabled])";class k{constructor(t){this.form=t;this.inputs=u(t,y).filter((t=>t.files.length))}start(t){const i=this.createDirectUploadControllers();const e=()=>{const s=i.shift();if(s){s.start((i=>{if(i){t(i);this.dispatch("end")}else{e()}}))}else{t();this.dispatch("end")}};this.dispatch("start");e()}createDirectUploadControllers(){const t=[];this.inputs.forEach((i=>{p(i.files).forEach((e=>{const s=new x(i,e);t.push(s)}))}));return t}dispatch(t,i={}){return f(this.form,`direct-uploads:${t}`,{detail:i})}}const $="data-direct-uploads-processing";const T=new WeakMap;let U=false;function C(){if(!U){U=true;document.addEventListener("click",A,true);document.addEventListener("submit",R,true);document.addEventListener("ajax:before",E)}}function A(t){const{target:i}=t;if((i.tagName=="INPUT"||i.tagName=="BUTTON")&&i.type=="submit"&&i.form){T.set(i.form,i)}}function R(t){j(t)}function E(t){if(t.target.tagName=="FORM"){j(t)}}function j(t){const i=t.target;if(i.hasAttribute($)){t.preventDefault();return}const e=new k(i);const{inputs:s}=e;if(s.length){t.preventDefault();i.setAttribute($,"");s.forEach(M);e.start((t=>{i.removeAttribute($);if(t){s.forEach(F)}else{O(i)}}))}}function O(t){let i=T.get(t)||d(t,"input[type=submit], button[type=submit]");if(i){const{disabled:t}=i;i.disabled=false;i.focus();i.click();i.disabled=t}else{i=document.createElement("input");i.type="submit";i.style.display="none";t.appendChild(i);i.click();t.removeChild(i)}T.delete(t)}function M(t){t.disabled=true}function F(t){t.disabled=false}function S(){if(window.ActiveStorage){C()}}setTimeout(S,1);class B{uploadedFile;file;directUpload;recordXHR;uploadXHR;callback=null;constructor(t){this.uploadedFile=t;this.file=this.uploadedFile["file"];this.directUpload=new b(this.file,this.uploadedFile.url,this)}cancel(){this.directUpload.url=null;this.abortXHR(this.recordXHR);this.abortXHR(this.uploadXHR)}abortXHR(t){if(!t)return;t.addEventListener("abort",(()=>{this.complete("aborted",{})}));t.abort()}start(t){this.callback=t;this.dispatch("start");this.directUpload.create(((t,i)=>{this.complete(t,i)}))}complete(t,i){if(t){this.dispatchError(t)}this.dispatch("end");this.callback(t)}uploadRequestDidProgress(t){const i=t.loaded/t.total*100;if(i){this.dispatch("progress",{progress:i})}}dispatch(t,i={}){return z(this.uploadedFile,`direct-upload:${t}`,{detail:{...i,file:this.file,id:this.directUpload.id}})}dispatchError(t){this.dispatch("error",{error:t})}directUploadWillCreateBlobWithXHR(t){this.recordXHR=t;this.dispatch("before-blob-request",{xhr:t})}directUploadWillStoreFileWithXHR(t){this.uploadXHR=t;this.uploadedFile.value=this.recordXHR.response.signed_id;this.dispatch("before-storage-request",{xhr:t});t.upload.addEventListener("progress",(t=>this.uploadRequestDidProgress(t)))}}function z(t,i,e={}){const{disabled:s}=t;const{bubbles:r,cancelable:n,detail:o}=e;const a=document.createEvent("Event");a.initEvent(i,r||true,n||true);a.detail=o||{};try{t.disabled=false;t.dispatchEvent(a)}finally{t.disabled=s}return a}class L{uploadedFile;constructor(t){this.uploadedFile=t}get errors(){if(this.#t)return this.#t;this.#t=[];if(!this.checkValidity()){this.#t.push(this.errorMessage)}return this.#t}#t;checkValidity(){if(!this.uploadedFile.max)return true;return this.uploadedFile.size<=this.uploadedFile.max}get errorMessage(){return[`Must be smaller than ${this.formatBytes(this.uploadedFile.max)},`,`and "${this.uploadedFile.filename}" is ${this.formatBytes(this.uploadedFile.size)}.`,`Please attach a smaller file.`].join(" ")}formatBytes(t,i=2){if(t===0)return"0 Bytes";const e=1024;const s=i<0?0:i;const r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];const n=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,n)).toFixed(s))+r[n]}}class P{uploadedFile;constructor(t){this.uploadedFile=t}get errors(){if(this.#t)return this.#t;this.#t=[];const t=this.uploadedFile.accepts?this.uploadedFile.accepts.split(/,\s*/):[];if(t.length>0&&!t.includes(this.uploadedFile.filetype)){this.#t.push(`Must be a ${this.joinWords(t)}.`)}return this.#t}#t;joinWords(t){if(t.length>=3){return(t.slice(0,-1)+[`or ${t.at(-1)}`]).join(", ")}else{return t.join(" or ")}}}const q={image:["ase","art","bmp","blp","cd5","cit","cpt","cr2","cut","dds","dib","djvu","egt","exif","gif","gpl","grf","icns","ico","iff","jng","jpeg","jpg","jfif","jp2","jps","lbm","max","miff","mng","msp","nef","nitf","ota","pbm","pc1","pc2","pc3","pcf","pcx","pdn","pgm","PI1","PI2","PI3","pict","pct","pnm","pns","ppm","psb","psd","pdd","psp","px","pxm","pxr","qfx","raw","rle","sct","sgi","rgb","int","bw","tga","tiff","tif","vtf","xbm","xcf","xpm","3dv","amf","ai","awg","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","gbr","odg","svg","stl","vrml","x3d","sxd","v2d","vnd","wmf","emf","art","xar","png","webp","jxr","hdp","wdp","cur","ecw","iff","lbm","liff","nrrd","pam","pcx","pgf","sgi","rgb","rgba","bw","int","inta","sid","ras","sun","tga","heic","heif"],video:["3g2","3gp","3gpp","aaf","asf","avchd","avi","drc","flv","m2v","m3u8","m4p","m4v","mkv","mng","mov","mp2","mp4","mpe","mpeg","mpg","mpv","mxf","nsv","ogg","ogv","qt","rm","rmvb","roq","svi","vob","webm","wmv","yuv"],pdf:["pdf"],getFileType:function(t){const i=t.toString().split(".").at(-1).toLowerCase().trim();if(this.video.includes(i))return"video";if(this.image.includes(i))return"image";if(this.pdf.includes(i))return"pdf";return"unknown"}};class I{constructor(t){this.response=t}get statusCode(){return this.response.status}get redirected(){return this.response.redirected}get ok(){return this.response.ok}get unauthenticated(){return this.statusCode===401}get unprocessableEntity(){return this.statusCode===422}get authenticationURL(){return this.response.headers.get("WWW-Authenticate")}get contentType(){const t=this.response.headers.get("Content-Type")||"";return t.replace(/;.*$/,"")}get headers(){return this.response.headers}get html(){if(this.contentType.match(/^(application|text)\/(html|xhtml\+xml)$/)){return this.text}return Promise.reject(new Error(`Expected an HTML response but got "${this.contentType}" instead`))}get json(){if(this.contentType.match(/^application\/.*json$/)){return this.responseJson||(this.responseJson=this.response.json())}return Promise.reject(new Error(`Expected a JSON response but got "${this.contentType}" instead`))}get text(){return this.responseText||(this.responseText=this.response.text())}get isTurboStream(){return this.contentType.match(/^text\/vnd\.turbo-stream\.html/)}async renderTurboStream(){if(this.isTurboStream){if(window.Turbo){await window.Turbo.renderStreamMessage(await this.text)}else{console.warn("You must set `window.Turbo = Turbo` to automatically process Turbo Stream events with request.js")}}else{return Promise.reject(new Error(`Expected a Turbo Stream response but got "${this.contentType}" instead`))}}}class W{static register(t){this.interceptor=t}static get(){return this.interceptor}static reset(){this.interceptor=undefined}}function D(t){const i=document.cookie?document.cookie.split("; "):[];const e=`${encodeURIComponent(t)}=`;const s=i.find((t=>t.startsWith(e)));if(s){const t=s.split("=").slice(1).join("=");if(t){return decodeURIComponent(t)}}}function H(t){const i={};for(const e in t){const s=t[e];if(s!==undefined){i[e]=s}}return i}function X(t){const i=document.head.querySelector(`meta[name="${t}"]`);return i&&i.content}function N(t){return[...t].reduce(((t,[i,e])=>t.concat(typeof e==="string"?[[i,e]]:[])),[])}function _(t,i){for(const[e,s]of i){if(s instanceof window.File)continue;if(t.has(e)){t.delete(e);t.set(e,s)}else{t.append(e,s)}}}class J{constructor(t,i,e={}){this.method=t;this.options=e;this.originalUrl=i.toString()}async perform(){try{const t=W.get();if(t){await t(this)}}catch(t){console.error(t)}const t=new I(await window.fetch(this.url,this.fetchOptions));if(t.unauthenticated&&t.authenticationURL){return Promise.reject(window.location.href=t.authenticationURL)}if(t.ok&&t.isTurboStream){await t.renderTurboStream()}return t}addHeader(t,i){const e=this.additionalHeaders;e[t]=i;this.options.headers=e}get fetchOptions(){return{method:this.method.toUpperCase(),headers:this.headers,body:this.formattedBody,signal:this.signal,credentials:"same-origin",redirect:this.redirect}}get headers(){return H(Object.assign({"X-Requested-With":"XMLHttpRequest","X-CSRF-Token":this.csrfToken,"Content-Type":this.contentType,Accept:this.accept},this.additionalHeaders))}get csrfToken(){return D(X("csrf-param"))||X("csrf-token")}get contentType(){if(this.options.contentType){return this.options.contentType}else if(this.body==null||this.body instanceof window.FormData){return undefined}else if(this.body instanceof window.File){return this.body.type}return"application/json"}get accept(){switch(this.responseKind){case"html":return"text/html, application/xhtml+xml";case"turbo-stream":return"text/vnd.turbo-stream.html, text/html, application/xhtml+xml";case"json":return"application/json, application/vnd.api+json";default:return"*/*"}}get body(){return this.options.body}get query(){const t=(this.originalUrl.split("?")[1]||"").split("#")[0];const i=new URLSearchParams(t);let e=this.options.query;if(e instanceof window.FormData){e=N(e)}else if(e instanceof window.URLSearchParams){e=e.entries()}else{e=Object.entries(e||{})}_(i,e);const s=i.toString();return s.length>0?`?${s}`:""}get url(){return this.originalUrl.split("?")[0].split("#")[0]+this.query}get responseKind(){return this.options.responseKind||"html"}get signal(){return this.options.signal}get redirect(){return this.options.redirect||"follow"}get additionalHeaders(){return this.options.headers||{}}get formattedBody(){const t=Object.prototype.toString.call(this.body)==="[object String]";const i=this.headers["Content-Type"]==="application/json";if(i&&!t){return JSON.stringify(this.body)}return this.body}}const V=(t,i,e)=>{const s=new J(t,i,{headers:{Accept:"application/json"},body:e});return s.perform().then((t=>{if(t.response.ok){return t.json}else{return t}}))};const G=(t,i)=>V("get",t,i);var Y=11;function K(t,i){var e=i.attributes;var s;var r;var n;var o;var a;if(i.nodeType===Y||t.nodeType===Y){return}for(var h=e.length-1;h>=0;h--){s=e[h];r=s.name;n=s.namespaceURI;o=s.value;if(n){r=s.localName||r;a=t.getAttributeNS(n,r);if(a!==o){if(s.prefix==="xmlns"){r=s.name}t.setAttributeNS(n,r,o)}}else{a=t.getAttribute(r);if(a!==o){t.setAttribute(r,o)}}}var c=t.attributes;for(var l=c.length-1;l>=0;l--){s=c[l];r=s.name;n=s.namespaceURI;if(n){r=s.localName||r;if(!i.hasAttributeNS(n,r)){t.removeAttributeNS(n,r)}}else{if(!i.hasAttribute(r)){t.removeAttribute(r)}}}}var Z;var Q="http://www.w3.org/1999/xhtml";var tt=typeof document==="undefined"?undefined:document;var it=!!tt&&"content"in tt.createElement("template");var et=!!tt&&tt.createRange&&"createContextualFragment"in tt.createRange();function st(t){var i=tt.createElement("template");i.innerHTML=t;return i.content.childNodes[0]}function rt(t){if(!Z){Z=tt.createRange();Z.selectNode(tt.body)}var i=Z.createContextualFragment(t);return i.childNodes[0]}function nt(t){var i=tt.createElement("body");i.innerHTML=t;return i.childNodes[0]}function ot(t){t=t.trim();if(it){return st(t)}else if(et){return rt(t)}return nt(t)}function at(t,i){var e=t.nodeName;var s=i.nodeName;var r,n;if(e===s){return true}r=e.charCodeAt(0);n=s.charCodeAt(0);if(r<=90&&n>=97){return e===s.toUpperCase()}else if(n<=90&&r>=97){return s===e.toUpperCase()}else{return false}}function ht(t,i){return!i||i===Q?tt.createElement(t):tt.createElementNS(i,t)}function ct(t,i){var e=t.firstChild;while(e){var s=e.nextSibling;i.appendChild(e);e=s}return i}function lt(t,i,e){if(t[e]!==i[e]){t[e]=i[e];if(t[e]){t.setAttribute(e,"")}else{t.removeAttribute(e)}}}var ut={OPTION:function(t,i){var e=t.parentNode;if(e){var s=e.nodeName.toUpperCase();if(s==="OPTGROUP"){e=e.parentNode;s=e&&e.nodeName.toUpperCase()}if(s==="SELECT"&&!e.hasAttribute("multiple")){if(t.hasAttribute("selected")&&!i.selected){t.setAttribute("selected","selected");t.removeAttribute("selected")}e.selectedIndex=-1}}lt(t,i,"selected")},INPUT:function(t,i){lt(t,i,"checked");lt(t,i,"disabled");if(t.value!==i.value){t.value=i.value}if(!i.hasAttribute("value")){t.removeAttribute("value")}},TEXTAREA:function(t,i){var e=i.value;if(t.value!==e){t.value=e}var s=t.firstChild;if(s){var r=s.nodeValue;if(r==e||!e&&r==t.placeholder){return}s.nodeValue=e}},SELECT:function(t,i){if(!i.hasAttribute("multiple")){var e=-1;var s=0;var r=t.firstChild;var n;var o;while(r){o=r.nodeName&&r.nodeName.toUpperCase();if(o==="OPTGROUP"){n=r;r=n.firstChild}else{if(o==="OPTION"){if(r.hasAttribute("selected")){e=s;break}s++}r=r.nextSibling;if(!r&&n){r=n.nextSibling;n=null}}}t.selectedIndex=e}}};var dt=1;var ft=11;var pt=3;var gt=8;function mt(){}function vt(t){if(t){return t.getAttribute&&t.getAttribute("id")||t.id}}function bt(t){return function i(e,s,r){if(!r){r={}}if(typeof s==="string"){if(e.nodeName==="#document"||e.nodeName==="HTML"||e.nodeName==="BODY"){var n=s;s=tt.createElement("html");s.innerHTML=n}else{s=ot(s)}}else if(s.nodeType===ft){s=s.firstElementChild}var o=r.getNodeKey||vt;var a=r.onBeforeNodeAdded||mt;var h=r.onNodeAdded||mt;var c=r.onBeforeElUpdated||mt;var l=r.onElUpdated||mt;var u=r.onBeforeNodeDiscarded||mt;var d=r.onNodeDiscarded||mt;var f=r.onBeforeElChildrenUpdated||mt;var p=r.skipFromChildren||mt;var g=r.addChild||function(t,i){return t.appendChild(i)};var m=r.childrenOnly===true;var v=Object.create(null);var b=[];function w(t){b.push(t)}function x(t,i){if(t.nodeType===dt){var e=t.firstChild;while(e){var s=undefined;if(i&&(s=o(e))){w(s)}else{d(e);if(e.firstChild){x(e,i)}}e=e.nextSibling}}}function y(t,i,e){if(u(t)===false){return}if(i){i.removeChild(t)}d(t);x(t,e)}function k(t){if(t.nodeType===dt||t.nodeType===ft){var i=t.firstChild;while(i){var e=o(i);if(e){v[e]=i}k(i);i=i.nextSibling}}}k(e);function $(t){h(t);var i=t.firstChild;while(i){var e=i.nextSibling;var s=o(i);if(s){var r=v[s];if(r&&at(i,r)){i.parentNode.replaceChild(r,i);U(r,i)}else{$(i)}}else{$(i)}i=e}}function T(t,i,e){while(i){var s=i.nextSibling;if(e=o(i)){w(e)}else{y(i,t,true)}i=s}}function U(i,e,s){var r=o(e);if(r){delete v[r]}if(!s){if(c(i,e)===false){return}t(i,e);l(i);if(f(i,e)===false){return}}if(i.nodeName!=="TEXTAREA"){C(i,e)}else{ut.TEXTAREA(i,e)}}function C(t,i){var e=p(t,i);var s=i.firstChild;var r=t.firstChild;var n;var h;var c;var l;var u;t:while(s){l=s.nextSibling;n=o(s);while(!e&&r){c=r.nextSibling;if(s.isSameNode&&s.isSameNode(r)){s=l;r=c;continue t}h=o(r);var d=r.nodeType;var f=undefined;if(d===s.nodeType){if(d===dt){if(n){if(n!==h){if(u=v[n]){if(c===u){f=false}else{t.insertBefore(u,r);if(h){w(h)}else{y(r,t,true)}r=u}}else{f=false}}}else if(h){f=false}f=f!==false&&at(r,s);if(f){U(r,s)}}else if(d===pt||d==gt){f=true;if(r.nodeValue!==s.nodeValue){r.nodeValue=s.nodeValue}}}if(f){s=l;r=c;continue t}if(h){w(h)}else{y(r,t,true)}r=c}if(n&&(u=v[n])&&at(u,s)){if(!e){g(t,u)}U(u,s)}else{var m=a(s);if(m!==false){if(m){s=m}if(s.actualize){s=s.actualize(t.ownerDocument||tt)}g(t,s);$(s)}}s=l;r=c}T(t,r,h);var b=ut[t.nodeName];if(b){b(t,i)}}var A=e;var R=A.nodeType;var E=s.nodeType;if(!m){if(R===dt){if(E===dt){if(!at(e,s)){d(e);A=ct(e,ht(s.nodeName,s.namespaceURI))}}else{A=s}}else if(R===pt||R===gt){if(E===R){if(A.nodeValue!==s.nodeValue){A.nodeValue=s.nodeValue}return A}else{A=s}}}if(A===s){d(e)}else{if(s.isSameNode&&s.isSameNode(A)){return}U(A,s,m);if(b){for(var j=0,O=b.length;j<O;j++){var M=v[b[j]];if(M){y(M,M.parentNode,false)}}}}if(!m&&A!==e&&e.parentNode){if(A.actualize){A=A.actualize(e.ownerDocument||tt)}e.parentNode.replaceChild(A,e)}return A}}var wt=bt(K);function xt(t){const i=document.createElement("div");wt(i,`<div>${t}</div>`);return i.children[0]}function yt(t,i){const e=t.findIndex((t=>t===i));if(e!==-1){t.splice(e,1)}}const kt=':host{display:block;width:100%;max-width:100%;font-size:13px}figure{margin:0}.progress-details{position:relative;display:flex;align-items:center}progress-bar{flex:1 0;padding:0 10px}progress-bar.pending{opacity:0.5}progress-bar.complete{opacity:0.8}progress-bar:not(.complete)+.progress-icon{display:none}progress-bar.complete+.progress-icon{content:url(\'data:image/svg+xml;utf8,<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"><g><path d="M6.3,9.1c0.2,0,0.5,0.1,0.7,0.4c0.5,0.5,1,1,1.4,1.4c0.3,0.3,0.3,0.3,0.6,0c1.4-1.3,2.7-2.6,4-3.9c0.3-0.3,0.6-0.4,1-0.4 c0.5,0.1,0.9,0.6,0.7,1.1c-0.1,0.2-0.2,0.4-0.3,0.6c-1.6,1.6-3.2,3.2-4.8,4.8c-0.5,0.5-1,0.5-1.6,0c-0.8-0.7-1.5-1.5-2.3-2.3 c-0.3-0.3-0.5-0.6-0.3-1.1C5.5,9.3,5.8,9.1,6.3,9.1z"/></g></svg>\');filter:invert(100%)}.progress-icon{display:inline-block;flex:0 0 20px;width:28px;height:28px;background-size:contain;position:absolute;right:30px;z-index:1}progress-bar.error{background:#f8b3b1;background:rgba(74, 70, 70, 0.25);opacity:1}.progress-bar a{color:#fff}.download-link{padding-right:20px;color:#fff}.remove-media{display:inline-block;content:url(\'data:image/svg+xml;utf8,<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 40 40" style="enable-background:new 0 0 40 40;" xml:space="preserve"><g><path d="M0,19.9C0.2,8.5,9.2-0.1,20.1,0C31.8,0.1,40.2,9.5,40,20.4c-0.2,11-8.9,19.7-20.1,19.6C8,39.9,0,30.5,0,19.9z M20,3.7 c-9,0-16.3,7-16.3,16.2C3.7,29,10.9,36.3,20,36.3c9,0,16.3-7.1,16.4-16.3C36.3,11,29.2,3.8,20,3.7z"/><path d="M17.3,20c-0.2-0.2-0.3-0.4-0.5-0.6c-1-1-2-1.9-2.9-2.9c-0.5-0.5-0.8-1.1-0.7-1.9c0.1-0.7,0.5-1.2,1.2-1.4 c0.8-0.2,1.5,0,2.1,0.6c1,1,2,2,3,3.1c0.3,0.4,0.6,0.3,0.9,0c1-1,2-2,3-3c0.3-0.3,0.7-0.5,1.1-0.6c0.8-0.2,1.6,0.1,2,0.8 c0.4,0.8,0.3,1.7-0.4,2.4c-1,1-2,2-3,3c-0.2,0.2-0.3,0.4-0.5,0.6c1.2,1.2,2.3,2.3,3.4,3.4c0.6,0.6,0.9,1.3,0.6,2.2 c-0.4,1.1-1.7,1.6-2.6,1c-0.3-0.2-0.5-0.4-0.8-0.6c-1-1-1.9-1.9-2.9-2.9c-0.3-0.3-0.5-0.3-0.9,0c-1,1-2,2.1-3,3 c-0.4,0.4-1,0.6-1.5,0.8c-0.6,0.1-1.2-0.2-1.5-0.8c-0.4-0.6-0.5-1.3-0.1-1.9c0.2-0.3,0.4-0.5,0.6-0.7C15.1,22.3,16.2,21.2,17.3,20z "/></g></svg>\');flex:0 0 25px;width:25px;height:20px;align-items:center;opacity:0.25}.remove-media:hover{opacity:1;filter:invert(50%)sepia(100%)saturate(10000%)}.remove-media span{display:inline-block;text-indent:-9999px;color:transparent}';let $t=0;const Tt=class{get el(){return t(this)}removeEvent;removeClicked=t=>{t.stopPropagation();t.preventDefault();this.controller?.cancel();this.removeEvent.emit(this)};inputTarget;controller;_file;uid;constructor(t){i(this,t);this.removeEvent=e(this,"uploaded-file:remove",7);this.name=undefined;this.accepts=undefined;this.max=undefined;this.url=undefined;this.value="";this.filename=undefined;this.src=undefined;this.filetype=undefined;this.size=undefined;this.state="complete";this.percent=100;this.preview=true;this.validationMessage=undefined;this.uid=$t++;this.inputTarget=xt(`<input id="input-target-${this.uid}">`)}componentWillLoad(){this.el.appendChild(this.inputTarget);this.setMissingFiletype()}get file(){return this._file}set file(t){this.src=URL.createObjectURL(t);this.filename=t.name;this.size=t.size;this.state="pending";this.percent=0;this._file=t}set signedId(t){if(this.value!==t){G(`/rails/active_storage/blobs/info/${t}`).then((i=>{this.src=`/rails/active_storage/blobs/redirect/${t}/${i.filename}`;this.filename=i.filename;this.size=i.byte_size;this.state="complete";this.percent=100;this.value=t}))}}setMissingFiletype(t,i){if(!this.filetype&&this.filename){this.filetype=q.getFileType(this.filename)}}start(t){this.state="pending";this.percent=0}progress(t){const{progress:i}=t.detail;this.percent=i}error(t){t.preventDefault();const{error:i}=t.detail;this.state="error";this.inputTarget.setCustomValidity(i)}end(t){if(this.state!=="error"){this.state="complete";this.percent=100}}render(){return s(r,null,s("slot",null),s("figure",null,s("div",{class:"progress-details"},s("progress-bar",{percent:this.percent,class:this.state},s("a",{class:"download-link",href:this.src,download:this.filename,onClick:t=>t.stopPropagation()},this.filename)),s("span",{class:"progress-icon"}),s("a",{class:"remove-media",onClick:this.removeClicked,href:"#"},s("span",null,"Remove media"))),this.preview?s("file-preview",{src:this.src,filetype:this.filetype}):""))}componentDidRender(){wt(this.inputTarget,`\n      <input\n        id="input-target-${this.uid}"\n        style="opacity: 0.01; width: 1px; height: 1px; z-index: -999; position: absolute;"\n        name="${this.name}"\n        value="${this.value}"\n      >`)}componentDidLoad(){if(this.checkValidity()&&this.state=="pending"){this.controller=new B(this.el);this.controller.dispatch("initialize",{controller:this.controller})}}checkValidity(){let t=[];t.push(...new P(this).errors);t.push(...new L(this).errors);this.inputTarget.setCustomValidity(t.join(" "));this.inputTarget.reportValidity();return t.length===0}static get watchers(){return{filename:["setMissingFiletype"]}}};Tt.style=kt;class Ut extends HTMLElement{constructor(){super();this.handleDragOver=this.handleDragOver.bind(this);this.handleDragLeave=this.handleDragLeave.bind(this);this.handleDrop=this.handleDrop.bind(this)}static get observedAttributes(){return["for"]}connectedCallback(){this.addEventListener("dragover",this.handleDragOver);this.addEventListener("dragleave",this.handleDragLeave);this.addEventListener("drop",this.handleDrop);this.applyDefaultStyles()}disconnectedCallback(){this.removeEventListener("dragover",this.handleDragOver);this.removeEventListener("dragleave",this.handleDragLeave);this.removeEventListener("drop",this.handleDrop)}get fileTarget(){const t=this.getAttribute("for");if(!t)return null;return document.querySelector(`#${t}`)}handleDragOver(t){t.preventDefault();this.classList.add("-dragover")}handleDragLeave(){this.classList.remove("-dragover")}handleDrop(t){t.preventDefault();this.classList.remove("-dragover");const i=this.fileTarget;if(i&&t.dataTransfer.files.length>0){i.files=t.dataTransfer.files;const e=new Event("change",{bubbles:true});i.dispatchEvent(e)}}applyDefaultStyles(){if(!this.hasAttribute("data-no-default-styles")){const t=`\n        file-drop {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          box-sizing: border-box;\n          min-height: 60px;\n          outline-offset: -10px;\n          padding: 20px;\n          background: rgba(255, 255, 255, 0.25);\n          text-align: center;\n          transition: all 0.15s ease 0s;\n          outline: rgba(0, 0, 0, 0.25) dashed 2px;\n          font-size: 13px;\n        }\n\n        file-drop.-dragover {\n          background: rgba(0, 0, 0, 0.1);\n          outline-color: rgba(0, 0, 0, 0.5);\n        }\n      `;if(!document.querySelector("#file-drop-default-styles")){const i=document.createElement("style");i.id="file-drop-default-styles";i.textContent=t;document.head.appendChild(i)}}}}if(!customElements.get("file-drop")){customElements.define("file-drop",Ut)}const Ct=":host{display:block;padding:25px;color:var(--bard-file-text-color, #000);font-size:13px}file-drop{cursor:pointer}:host *{box-sizing:border-box;position:relative}drag-and-drop{display:block;outline-offset:-10px;background:rgba(255,255,255, 0.25);margin:0;text-align:center;transition:all 0.15s;outline:2px dashed rgba(0,0,0,0.25);color:#444;font-size:14px}p{padding:10px 20px;margin:0}drag-and-drop.-full{width:100%}.-dragover{background:rgba(255,255,255,0.5);outline:2px dashed rgba(0,0,0,0.25)}.media-preview{display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:center}// UPLOADER .direct-upload-wrapper{position:fixed;z-index:9999;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:rgba(#333, 0.9)}.direct-upload-content{display:block;background:#fcfcfc;padding:40px 60px 60px;border-radius:3px;width:60vw}.direct-upload-content h3{border-bottom:2px solid #1f1f1f;margin-bottom:20px}.separate-upload{padding:0 10px;margin-top:10px;font-size:0.9em}.direct-upload--pending{opacity:0.6}.direct-upload--complete{opacity:0.4}.direct-upload--error{border-color:red}input[type=file][data-direct-upload-url][disabled]{display:none}:host.separate-upload{padding:0 10px;margin-top:10px;font-size:0.9em}";const At=class{get el(){return t(this)}forceUpdate(){this._forceUpdate=!this._forceUpdate}form;fileTargetId;fileTarget;hiddenTargetId;hiddenTarget;_files=[];constructor(t){i(this,t);this.name=undefined;this.directupload=undefined;this.multiple=false;this.required=false;this.accepts=undefined;this.max=undefined;this.preview=true;this._forceUpdate=false;this.fileTargetId=this.el.id;this.fileTarget=xt(`<input id="${this.fileTargetId}">`);this.hiddenTargetId=`hidden-target-${this.el.getAttribute("name")}`;this.hiddenTarget=xt(`<input id="${this.hiddenTargetId}">`)}componentWillLoad(){this.el.removeAttribute("id");this.form=this.el.closest("form");this.form.addEventListener("reset",(()=>this.reset()));n.instance(this.form);const t=Array.from(this.el.children).filter((t=>t.tagName=="UPLOADED-FILE"));if(t.length>0)this.files=t}get files(){return this._files}set files(t){this._files=t;if(!this.multiple)this._files=this._files.slice(-1);this.forceUpdate();this.fireChangeEvent()}get value(){return this.files.map((t=>t.value))}set value(t){const i=t||[];if(JSON.stringify(this.value)!==JSON.stringify(i)){this.files=i.map((t=>Object.assign(new Tt,{name:this.name,preview:this.preview,signedId:t})))}}reset(){this.value=[]}fileTargetChanged(t){if(t.target!==this.fileTarget)return;this.files.push(...Array.from(this.fileTarget.files).map((t=>Object.assign(new Tt,{name:this.name,preview:this.preview,url:this.directupload,accepts:this.accepts,max:this.max,file:t}))));this.files=this.files;this.fileTarget.value=null}removeUploadedFile(t){yt(this.files,t.detail);this.files=this.files}fireChangeEvent(){requestAnimationFrame((()=>this.el.dispatchEvent(new Event("change",{bubbles:true}))))}render(){return s(r,null,s("file-drop",{for:this.fileTargetId,onClick:()=>this.fileTarget.click()},s("p",{part:"title"},s("strong",null,"Choose ",this.multiple?"files":"file"," "),s("span",null,"or drag ",this.multiple?"them":"it"," here.")),s("div",{class:`media-preview ${this.multiple?"-stacked":""}`},s("slot",null))))}componentDidRender(){wt(this.fileTarget,`\n      <input id="${this.fileTargetId}"\n        type="file"\n        ${this.multiple?"multiple":""}\n        ${this.required&&this.files.length===0?"required":""}\n        style="opacity: 0.01; width: 1px; height: 1px; z-index: -999"\n      >`);wt(this.hiddenTarget,`\n      <input id="${this.hiddenTargetId}"\n        type="hidden"\n        name="${this.name}"\n        ${this.files.length>0?"disabled":""}\n      >`);const t=document.createElement("div");while(t.firstChild){t.removeChild(t.firstChild)}t.appendChild(this.fileTarget);t.appendChild(this.hiddenTarget);this.files.forEach((i=>t.appendChild(i)));wt(this.el,t,{childrenOnly:true})}checkValidity(){return this.fileTarget.checkValidity()}setCustomValidity(t){this.fileTarget.setCustomValidity(t)}reportValidity(){this.fileTarget.reportValidity()}get validationMessage(){return this.fileTarget.validationMessage}};At.style=Ct;const Rt=":host{display:block;font-size:13px}img,video{max-width:100%;margin-top:10px}";const Et=class{constructor(t){i(this,t);this.src=undefined;this.filetype=undefined}render(){return s(r,{class:this.computeClass()},this.isImage()&&s("img",{src:this.src}),this.isVideo()&&s("video",{src:this.src,onClick:jt}),this.isOther()&&"This file does not offer a preview",s("slot",null))}computeClass(){if(this.isImage())return"image";if(this.isVideo())return"video";return"other"}isImage(){return this.filetype=="image"}isVideo(){return this.filetype=="video"}isOther(){return!this.isImage()&&!this.isVideo()}};const jt=function(){this.paused?this.play():this.pause();return false};Et.style=Rt;const Ot=":host{display:block;position:relative;padding:0 20px;border:1px solid rgba(0, 0, 0, 0.3);border-radius:3px;line-height:2;flex:1 0;box-sizing:border-box;text-align:left;font-size:13px}.bar{position:absolute;top:0;left:0;bottom:0;background:rgba(57, 137, 39, 1);transition:width 120ms ease-out, opacity 60ms 60ms ease-in;transform:translate3d(0, 0, 0)}.content{position:relative;color:#fff;font-size:1em}";const Mt=class{constructor(t){i(this,t);this.percent=0}render(){return s(r,null,s("div",{class:"bar",style:{width:`${this.percent}%`}}),s("span",{class:"content"},s("slot",null)))}};Mt.style=Ot;export{At as bard_file,Et as file_preview,Mt as progress_bar,Tt as uploaded_file};
//# sourceMappingURL=p-fb114eb3.entry.js.map